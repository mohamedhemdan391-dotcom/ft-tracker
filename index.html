<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>FT Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f5f5f5;
}
header{
  background:#b00000;
  color:#fff;
  text-align:center;
  padding:15px;
  font-size:22px;
}
.container{
  padding:20px;
}
.btn{
  width:100%;
  padding:15px;
  margin:10px 0;
  border:none;
  border-radius:25px;
  background:#b00000;
  color:#fff;
  font-size:18px;
  cursor:pointer;
}
input,select,textarea{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:15px;
}
.hidden{display:none;}
.alert{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:#fff;
  padding:25px;
  border-radius:12px;
  box-shadow:0 0 20px rgba(0,0,0,.3);
  text-align:center;
  font-size:18px;
  z-index:9999;
}
.alert.success{border:3px solid green;}
.alert.error{border:3px solid red;}
.lead-box{
  border:2px solid #b00000;
  padding:15px;
  border-radius:10px;
  margin-bottom:15px;
}
.lead-actions{
  display:flex;
  gap:10px;
}
.small-btn{
  flex:1;
  padding:10px;
  border:none;
  border-radius:8px;
  background:#b00000;
  color:#fff;
  cursor:pointer;
}
</style>
</head>

<body>

<header>FT Tracker</header>

<div class="container">

<!-- الصفحة الرئيسية -->
<div id="home">
  <button class="btn" onclick="openTab('daily')">التشييك اليومي</button>
  <button class="btn" onclick="openTab('detailed')">التشييك الدقيق</button>
  <button class="btn" onclick="openTab('leads')">العملاء المرشحين</button>
  <button class="btn" onclick="openTab('business')">Business Plan</button>
</div>

<!-- DAILY -->
<div id="daily" class="hidden">
  <button class="btn" onclick="goHome()">العودة للرئيسية</button>
  <h2>التشييك اليومي</h2>
  <p>✔ يعمل كما هو بدون أي تعديل</p>
</div>

<!-- DETAILED -->
<div id="detailed" class="hidden">
  <button class="btn" onclick="goHome()">العودة للرئيسية</button>
  <h2>التشييك الدقيق</h2>
  <p>✔ يعمل كما هو بدون أي تعديل</p>
</div>

<!-- LEADS -->
<div id="leads" class="hidden">
  <button class="btn" onclick="goHome()">العودة للرئيسية</button>
  <h2>العملاء المرشحين</h2>

  <div id="leadList"></div>

  <div class="lead-actions">
    <button class="small-btn" onclick="addLead()">➕ إضافة عميل</button>
    <button class="small-btn" onclick="removeLead()">➖ حذف عميل</button>
  </div>

  <button class="btn" onclick="sendLeads()">إرسال</button>
</div>

<!-- BUSINESS -->
<div id="business" class="hidden">
  <button class="btn" onclick="goHome()">العودة للرئيسية</button>
  <h2>Business Plan</h2>
  <p>✔ يعمل كما هو بدون أي تعديل</p>
</div>

</div>

<!-- ALERT -->
<div id="alertBox" class="alert hidden"></div>

<script>
function openTab(id){
  document.querySelectorAll(".container > div").forEach(d=>d.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}
function goHome(){
  document.querySelectorAll(".container > div").forEach(d=>d.classList.add("hidden"));
  document.getElementById("home").classList.remove("hidden");
}

/* ALERT */
function show(type,msg){
  const box=document.getElementById("alertBox");
  box.className="alert "+type;
  box.innerHTML=msg;
  box.classList.remove("hidden");
  setTimeout(()=>box.classList.add("hidden"),2000);
}

/* RESET + HOME */
function resetAndHome(){
  setTimeout(()=>{
    document.querySelectorAll("input,textarea").forEach(e=>e.value="");
    document.querySelectorAll("select").forEach(e=>e.selectedIndex=0);
    document.getElementById("leadList").innerHTML="";
    addLead();
    goHome();
  },1500);
}

/* LEADS */
function addLead(){
  const div=document.createElement("div");
  div.className="lead-box";
  div.innerHTML=`
    <input class="lc" placeholder="اسم المدرب *">
    <input class="lb" placeholder="اسم الفرع *">
    <input class="ln" placeholder="اسم العميل *">
    <input class="lp" placeholder="رقم الجوال *">
  `;
  document.getElementById("leadList").appendChild(div);
}
function removeLead(){
  const list=document.getElementById("leadList");
  if(list.children.length>1) list.removeChild(list.lastChild);
}

/* SEND LEADS */
function sendLeads(){
  const c=document.querySelectorAll(".lc");
  const b=document.querySelectorAll(".lb");
  const n=document.querySelectorAll(".ln");
  const p=document.querySelectorAll(".lp");

  for(let i=0;i<n.length;i++){
    if(!c[i].value||!b[i].value||!n[i].value||!p[i].value){
      show("error","❌ يرجى إدخال جميع البيانات");
      return;
    }
  }

  for(let i=0;i<n.length;i++){
    const fd=new URLSearchParams();
    fd.append("entry.1803783309",c[i].value);
    fd.append("entry.1531832061",b[i].value);
    fd.append("entry.1038119858",new Date().toLocaleString());
    fd.append("entry.634489457",n[i].value);
    fd.append("entry.2087664957",p[i].value);

    fetch("https://docs.google.com/forms/d/e/1FAIpQLSesXlFqpKwTxoMKyNmIJhAkuaZrzIA5KJmYwEM5dpdbZNhZFA/formResponse",{
      method:"POST",
      mode:"no-cors",
      body:fd
    });
  }

  show("success","✅ تم إرسال البيانات بنجاح");
  resetAndHome();
}

/* INIT */
addLead();
</script>

</body>
</html>
