<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FT Tracker</title>

<style>
:root{--red:#c40000;}
body{margin:0;font-family:Arial;background:#f4f4f4;direction:rtl}
header{background:var(--red);color:#fff;padding:20px;text-align:center}
.container{padding:20px}
.card{background:#fff;border-radius:14px;padding:18px;margin-bottom:14px;box-shadow:0 4px 10px rgba(0,0,0,.1);cursor:pointer}
.page{display:none}
.page.active{display:block}
input,select,textarea{width:100%;padding:12px;margin:8px 0;border-radius:8px;border:1px solid #ccc;font-size:15px}
button{background:var(--red);color:#fff;border:none;padding:14px;width:100%;border-radius:10px;font-size:17px;cursor:pointer;margin-top:10px}
.back{background:#555}
.row{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid #eee}
.row label{flex:1;text-align:right;padding-right:10px}
.success,.error{
position:fixed;inset:0;background:rgba(0,0,0,.65);
display:none;align-items:center;justify-content:center;
color:#fff;font-size:26px;z-index:999;text-align:center
}
.box{background:#1faa59;padding:20px;border-radius:12px}
.box.error{background:#c40000}
.device-box,.lead-box{border:1px dashed #ccc;padding:10px;border-radius:8px;margin:10px 0}
.small{background:#777;padding:6px 10px;width:auto}
</style>
</head>

<body>

<header>
<h1>FT</h1>
<p>FT Tracker</p>
</header>

<div class="container">

<!-- HOME -->
<div class="page active" id="home">
  <div class="card" onclick="openPage('daily')">Ø§Ù„ØªØ´ÙŠÙŠÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ</div>
  <div class="card" onclick="openPage('detailed')">Ø§Ù„ØªØ´ÙŠÙŠÙƒ Ø§Ù„Ø¯Ù‚ÙŠÙ‚</div>
  <div class="card" onclick="openPage('leads')">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ†</div>
</div>

<!-- DAILY -->
<div class="page" id="daily">
<h3>Ø§Ù„ØªØ´ÙŠÙŠÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ</h3>
<input id="d_coach" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø¨">

<h4>Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªØ´ÙŠÙŠÙƒ</h4>
<div id="areas">
<div class="row"><label>Ø§Ù„Ø¯Ù…Ø¨Ù„Ø² ÙˆØ§Ù„Ø¨Ø§Ø±Ø§Øª</label><input type="checkbox" value="Dumbbells & Bars"></div>
<div class="row"><label>Ø§Ù„Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª</label><input type="checkbox" value="Accessories"></div>
<div class="row"><label>Selection</label><input type="checkbox" value="Selection Area"></div>
<div class="row"><label>Ø§Ù„Ø­ØµØµ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©</label><input type="checkbox" value="Group Classes Area"></div>
<div class="row"><label>FTZ</label><input type="checkbox" value="FTZ Area"></div>
<div class="row"><label>TV</label><input type="checkbox" value="TV"></div>
<div class="row"><label>Ù…ÙƒØªØ¨ Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ†</label><input type="checkbox" value="Coaches Office"></div>
</div>

<textarea id="d_notes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></textarea>
<button onclick="submitDaily()">Ø¥Ø±Ø³Ø§Ù„</button>
<button class="back" onclick="goHome()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
</div>

<!-- DETAILED -->
<div class="page" id="detailed">
<h3>Ø§Ù„ØªØ´ÙŠÙŠÙƒ Ø§Ù„Ø¯Ù‚ÙŠÙ‚</h3>
<input id="dt_coach" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø¨">
<select id="dt_status" onchange="toggleDevices()">
<option value="">Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</option>
<option value="Ø¬ÙŠØ¯Ø©">Ø¬ÙŠØ¯Ø©</option>
<option value="ØµÙŠØ§Ù†Ø©">ØªØ­ØªØ§Ø¬ ØµÙŠØ§Ù†Ø©</option>
</select>

<div id="devices" style="display:none">
<div class="device-box">
<input class="dev_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²">
<input class="dev_serial" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø³ÙŠØ±ÙŠØ§Ù„">
<input class="dev_issue" placeholder="Ø´Ø±Ø­ Ø§Ù„Ø¹Ø·Ù„">
<input class="dev_order" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨">
<button class="small" onclick="this.parentElement.remove()">ğŸ—‘ Ø­Ø°Ù</button>
</div>
<button class="small" onclick="addDevice()">â• Ø¥Ø¶Ø§ÙØ© Ø¬Ù‡Ø§Ø²</button>
</div>

<button onclick="submitDetailed()">Ø¥Ø±Ø³Ø§Ù„</button>
<button class="back" onclick="goHome()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
</div>

<!-- LEADS -->
<div class="page" id="leads">
<h3>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ†</h3>
<input id="l_coach" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø¨">

<div id="leadList">
<div class="lead-box">
<input class="lead_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
<input class="lead_phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„">
<button class="small" onclick="this.parentElement.remove()">ğŸ—‘ Ø­Ø°Ù</button>
</div>
</div>

<button class="small" onclick="addLead()">â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„</button>
<button onclick="submitLeads()">Ø¥Ø±Ø³Ø§Ù„</button>
<button class="back" onclick="goHome()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
</div>

</div>

<div class="success" id="success"><div class="box">âœ”ï¸ ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</div></div>
<div class="error" id="error"><div class="box error">âŒ Ù‚Ù… Ø¨Ø¥Ø¯Ø®Ø§Ù„ ÙƒØ§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div></div>

<script>
function openPage(p){document.querySelectorAll('.page').forEach(x=>x.classList.remove('active'));document.getElementById(p).classList.add('active')}
function goHome(){openPage('home')}
function showSuccess(){success.style.display="flex";setTimeout(()=>{success.style.display="none";goHome()},1500)}
function showError(){error.style.display="flex";setTimeout(()=>error.style.display="none",1500)}

function submitDaily(){
let coach=d_coach.value.trim()
let selected=[...document.querySelectorAll('#areas input:checked')].map(x=>x.value)
if(!coach||selected.length==0){showError();return}

fetch("https://docs.google.com/forms/d/e/1FAIpQLSfnfa-TV_a5gQ0qKTvgNRVsPWCLAFBCknL3MSDm3iGBy0kjnQ/formResponse",{
method:"POST",mode:"no-cors",
body:new URLSearchParams({
"entry.1598276908":coach,
"entry.670685014":new Date().toLocaleString(),
"entry.793034521":selected.join(", "),
"entry.987129842":d_notes.value
})
})
d_coach.value="";d_notes.value="";document.querySelectorAll('#areas input').forEach(x=>x.checked=false)
showSuccess()
}

function toggleDevices(){devices.style.display=dt_status.value==="ØµÙŠØ§Ù†Ø©"?"block":"none"}
function addDevice(){
let d=document.createElement("div")
d.className="device-box"
d.innerHTML='<input class="dev_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²"><input class="dev_serial" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø³ÙŠØ±ÙŠØ§Ù„"><input class="dev_issue" placeholder="Ø´Ø±Ø­ Ø§Ù„Ø¹Ø·Ù„"><input class="dev_order" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨"><button class="small" onclick="this.parentElement.remove()">ğŸ—‘ Ø­Ø°Ù</button>'
devices.insertBefore(d,devices.lastElementChild)
}

function submitDetailed(){
if(!dt_coach.value||!dt_status.value){showError();return}
if(dt_status.value==="ØµÙŠØ§Ù†Ø©"){
let boxes=[...document.querySelectorAll('.device-box')]
for(let b of boxes){
if(!b.querySelector('.dev_name').value||!b.querySelector('.dev_serial').value||!b.querySelector('.dev_issue').value||!b.querySelector('.dev_order').value){showError();return}
}
}
showSuccess()
document.querySelectorAll('input,select').forEach(x=>x.value="")
devices.style.display="none"
}

function addLead(){
let l=document.createElement("div")
l.className="lead-box"
l.innerHTML='<input class="lead_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„"><input class="lead_phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„"><button class="small" onclick="this.parentElement.remove()">ğŸ—‘ Ø­Ø°Ù</button>'
leadList.appendChild(l)
}

function submitLeads(){
if(!l_coach.value){showError();return}
let leads=[...document.querySelectorAll('.lead-box')]
for(let l of leads){
if(!l.querySelector('.lead_name').value||!l.querySelector('.lead_phone').value){showError();return}
}
showSuccess()
document.querySelectorAll('input').forEach(x=>x.value="")
}
</script>

</body>
</html>
