<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FT Tracker</title>

<style>
body{
  margin:0;
  font-family: 'Cairo', sans-serif;
  background:#F9FAFB;
  color:#1F2937;
}

header{
  background:#D32F2F;
  color:#fff;
  text-align:center;
  padding:20px 10px;
}

header .logo{
  font-size:44px;
  font-weight:900;
  line-height:1;
}

header .title{
  font-size:18px;
  margin-top:5px;
}

.container{
  padding:16px;
}

.card{
  background:#fff;
  border-radius:16px;
  padding:20px;
  margin-bottom:16px;
  box-shadow:0 6px 16px rgba(0,0,0,0.08);
  display:flex;
  align-items:center;
  gap:16px;
  cursor:pointer;
}

.card-icon{
  width:60px;
  height:60px;
  border-radius:14px;
  background:#D32F2F;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:30px;
}

.card h3{
  margin:0;
  font-size:18px;
}

.card p{
  margin:4px 0 0;
  font-size:14px;
  color:#6B7280;
}

/* Forms */
form{
  background:#fff;
  border-radius:16px;
  padding:20px;
  box-shadow:0 6px 16px rgba(0,0,0,0.08);
}

input, textarea, button{
  width:100%;
  margin-bottom:12px;
  padding:12px;
  font-size:15px;
  border-radius:10px;
  border:1px solid #D1D5DB;
}

button{
  background:#D32F2F;
  color:#fff;
  border:none;
  font-size:16px;
  cursor:pointer;
}

button:disabled{
  opacity:.6;
}

/* Success Overlay */
#successOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.5);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:1000;
}

.successBox{
  background:#fff;
  border-radius:20px;
  padding:30px;
  text-align:center;
  width:85%;
  max-width:320px;
  animation:scaleIn .3s ease;
}

.successIcon{
  font-size:64px;
  color:#16A34A;
}

.successBox h2{
  margin:10px 0 5px;
}

.successBox p{
  color:#6B7280;
  font-size:14px;
}

.successBox button{
  margin-top:20px;
}

@keyframes scaleIn{
  from{transform:scale(0.7);opacity:0;}
  to{transform:scale(1);opacity:1;}
}
</style>
</head>

<body>

<header>
  <div class="logo">FT</div>
  <div class="title">FT Tracker</div>
</header>

<div class="container" id="home">
  <div class="card" onclick="openForm('daily')">
    <div class="card-icon">ğŸ“‹</div>
    <div>
      <h3>Ø§Ù„ØªØ´ÙŠÙŠÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ</h3>
      <p>Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ù„Ù„Ù†Ø§Ø¯ÙŠ</p>
    </div>
  </div>

  <div class="card" onclick="openForm('detailed')">
    <div class="card-icon">ğŸ› ï¸</div>
    <div>
      <h3>Ø§Ù„ØªØ´ÙŠÙŠÙƒ Ø§Ù„Ø¯Ù‚ÙŠÙ‚</h3>
      <p>ÙØ­Øµ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© ÙˆØ§Ù„Ù…Ø±Ø§ÙÙ‚</p>
    </div>
  </div>

  <div class="card" onclick="openForm('leads')">
    <div class="card-icon">ğŸ¯</div>
    <div>
      <h3>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ†</h3>
      <p>Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ†</p>
    </div>
  </div>
</div>

<div class="container" id="formContainer" style="display:none;"></div>

<!-- Success Overlay -->
<div id="successOverlay">
  <div class="successBox">
    <div class="successIcon">âœ…</div>
    <h2>ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­</h2>
    <p>ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù„Ù‰ Google Sheets</p>
    <button onclick="goHome()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  </div>
</div>

<script>
/* ğŸ”´ Ø¶Ø¹ Ø±Ø§Ø¨Ø· Web App Ù‡Ù†Ø§ */
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxBu6j9kNsaf8hVbFy1witztacqVdWvUiSz9LTxb8JWaXVDd6V1igIUWS1MK0drgSMarQ/exec";

/* Navigation */
function openForm(type){
  document.getElementById("home").style.display="none";
  const c = document.getElementById("formContainer");
  c.style.display="block";

  if(type==="daily"){
    c.innerHTML = `
    <form onsubmit="submitDaily(event)">
      <input id="trainer" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø¨" required>
      <input id="emp" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ¸ÙŠÙÙŠ" required>
      <input id="branch" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ±Ø¹" required>
      <input id="area" placeholder="Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØ´ÙŠÙŠÙƒ" required>
      <textarea id="notes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª"></textarea>
      <button type="submit">Ø¥Ø±Ø³Ø§Ù„</button>
    </form>`;
  }

  if(type==="leads"){
    c.innerHTML = `
    <form onsubmit="submitLead(event)">
      <input id="trainer" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø¨" required>
      <input id="branch" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ±Ø¹" required>
      <input id="client" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„" required>
      <input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„" required>
      <textarea id="notes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª"></textarea>
      <button type="submit">Ø¥Ø±Ø³Ø§Ù„</button>
    </form>`;
  }
}

function goHome(){
  document.getElementById("successOverlay").style.display="none";
  document.getElementById("formContainer").style.display="none";
  document.getElementById("home").style.display="block";
}

/* Send to Google Sheets */
function sendData(sheet, values){
  fetch(SCRIPT_URL,{
    method:"POST",
    body:JSON.stringify({sheet:sheet, values:values})
  })
  .then(r=>r.json())
  .then(d=>{
    if(d.status==="success"){
      showSuccess();
    } else {
      alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
    }
  })
  .catch(()=>alert("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„"));
}

/* Submit Handlers */
function submitDaily(e){
  e.preventDefault();
  sendData("Daily_Check",[
    trainer.value,
    emp.value,
    branch.value,
    new Date().toLocaleDateString(),
    new Date().toLocaleTimeString(),
    area.value,
    notes.value
  ]);
}

function submitLead(e){
  e.preventDefault();
  sendData("Leads",[
    trainer.value,
    branch.value,
    client.value,
    phone.value,
    notes.value
  ]);
}

/* Success UI */
function showSuccess(){
  document.getElementById("successOverlay").style.display="flex";
  setTimeout(goHome,2000);
}
</script>

</body>
</html>
